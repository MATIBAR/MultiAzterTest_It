<?xml version="1.0" encoding="UTF-8"?> Telekomunikazio Sareen eta Zerbitzuen Arkitektura Telekomukazioaren Ingeniaritza Teknikoko Gradua (2. Maila) <number> <number> <number>   4. GAIA – SARE MAILA     * Helburuak      *     o Sare mailako funtzioak azaldu, maila honetako protokoloak             aztertuz, eta eskaintzen dituzten zerbitzu mota ezberdinak             deskribatu.            o Konexiora Zuzendutako (KZ) sare mailako protokolo orokor baten             oinarrizko funtzionamendua aurkeztu.             o IP protokoloaren oinarrizko kontzeptuak azaldu, Konexiorik Gabeko             (KG) sare mailako protokolo bezala.       * Bibliografia            o Kurose, 1. kapitulua (1.3 eta 1.4 puntuak) eta 4. kapitulua            o Tanenbaum (3ª edizioa), 5. kapitulua            o Stallings (7. edizioa), 18. kapitulua            o Forouzan   <number>   4.1        Sarrera 4.1.1        Sare mailako funtzionaltasuna. 4.2.2 Konexiora zuzendutako eta konexiorik gabeko paketeen konmutazioa 4.1.2        Sare mailak eskainitako zerbitzu motak. 4.2        Konexiora zuzendutako sareak 4.2.1         Sarrera. 4.2.2        Zirkuitu birtualak (ZB). 4.2.3        ZB baten faseak. 4.2.4        Paketeen egitura eta pakete motak. 4.3        Konexiorik gabeko sareak. IP protokoloa 4.3.1         Sarrera. 4.3.2        Zerbitzu motak. 4.3.3        IP helbideratzea 4.3.4        Paketeen egitura (datagrama). 4.3.5        Protokoloaren prozedurak. <number>   <number>   SARE MAILAKO FUNTZIONALTASUNA     * Sare mailako funtzionaltasuna: iturri makinak sarera botatzen duen       informazioa helburu den makinara helduaraztea.      *     o Normalean, bitarteko nodoetan saltuak beharrezkoak dira.            o Bai sareko ekipoetan zein ekipo terminaletan      * Muturretik-muturrerako transmisioaz arduratzen den mailarik baxuena da.      * Beronen gainetik dauden geruzek ez dute zertan jakin behar datuak sarean       zehar transimititzeko erabiltzen diren konmutazio, multiplezaxio edota       bideraketa teknologiak. Beraientzako funtzio hauek gardenak dira  <number> <number>       * Bideraketa      *     o Informazioa iturritik helburura era egokian eramateko, sare mailak             zera egin behar du:      *     o     # Komunikazio sarearen topologia ezagutu.                   # Helburura heltzeko ibilbide egokienak aukeratu: bideraketa.            o Bideraketa funtzioa gauzatzeko, bideragailu bakoitzak eta ekipo             terminal bakoitzak bideraketa taulak dituzte.                  # Taula hauetan, helburu batera heltzeko ibilbide posibleak                   agertzen dira.       *     o Ibilbide ezberdinetatik datuak bideratzeko gaitasuna daukan gailu             bakoitzak bideraketa algoritmo bat exekutatzen du.       *     o     # Helburua: Bi puntuen artean ibilbiderik egokiena aurkitzea                   (bideraketa taularen sarrerak sortu).                  # Bideraketa algoritmoak irizpide ezberdinen arabera                   sailkatzen dira.   Helburu sarea Hurrengo saltua                <number> SARE MAILAKO FUNTZIONALTASUNA <number>       *     o Bideraketa algoritmoen sailkapena:      *     o     # Egokitzapenaren arabera:      *     o     #     # Estatikoa: Bideraketa taulak ez dira aldatzen                         denborarekin.           Trafiko eta topologia finkoa daukaten sareentzako aproposa.      Ibilbide alternatiboak izan ditzake.     *     o     #     # Dinamikoa: Bideraketa taulak, sareko egoeratara                         moldatzen dira (trafiko edo topologiara)          Bideraketa protokoloen beharra.     *     o     # Algoritmmoaren exekutatze tokiaren arabera:       *     o     #     # Zentralizatua: Bideraketa taulak, sareko nodo bakar                         batean sortzen dira (beste nodoetara banatzen                         dituelarik).                        # Banatua: Taulak, nodo guztien lankidetzatik sortzen                         dira.                   # Optimizatu nahi den parametroaren arabera:                        # Ibilbiderik laburrena                        # Kosturik txikiena                        # Atzerapen ertain txikiena                        # Sareraen kapazitatearen gehienezko erabilpena                        # Sarearen gainzamarik txikiena                        # …  <number> SARE MAILAKO FUNTZIONALTASUNA <number>       * Helbideratzea      *     o Iturri eta helburuaren artean ibilbide bat aurkitu ahal izateko,             komunikazioaren muturrak identifikatzea beharrezkoa da.      *     o     # Helbideratzea: Sarera konektatuta dagoen ekipo bakoitzari                   sare mailako helbide bat esleitzea, sare horren barruan                   ekipoa era bakarrean identifikatzen duena.            o Sare mailako helbideen formatu ezberdinak duade, sarearen arabera.             Adibidez:                  # IP sarea: IP helbideak (adib. 205.43.25.6)                  # X.25 sarea: NSAP-X.121 helbideak (adib. 204538910)                  # Sare telefoniko konmutatua: E.164 helbideak (adib.                   34944005060)            o Helbideraketa globala edo mundu mailako helbideraketa:                  # Helbide global batek makina bakar bat identifikatzen du.      *     o     #     # Makina batek helbide global bat baino gehiago izan                         ditzake.                  # Helbide global bati esker, bideraketa gauzatu daiteke                   helbide globala daukan makinaraino. (bakarra eta globala                   izateagatik).  <number> SARE MAILAKO FUNTZIONALTASUNA <number>       * Fluxu eta errore kontrola      *     o Sare mailak izan ditzaken errore motak hauek izan daitezke:             galdutako paketeak, bikoiztutako paketeak, desordenatutako             paketeak…            o Sare mailako fluxu kontrola: iturri eta helburu nodoen artean.      *     o     # Mekanismoak:      *     o     #     # Lehio irristakorreko mekanismoak: une batean                         ibilbidean zehar egon daitezkeen pakete kopurua                         mugatzea, igorleak hartzailearen aldetik berauen                         hartzearen baieztapena jaso arte.                        # Nodoetako biltegiratze baliabideak mugatzea.                        # Transmisio tasa mugatzea: igorleari abiadura                         jaitziaraztea.                        # …  <number> SARE MAILAKO FUNTZIONALTASUNA <number>       * Pilaketa edo kongestio kontrola      *     o Sareari, beronek bideratu dezakeen trafiko kopurua baino gehiago             eskaintzen zaionean sortzen diren arazoak antzeman eta zuzentzeko             teknikak.      *     o Pilaketa kontrolerako mekanismoen betebeharrak:      *     o     # Pilaketaren ekiditzea: ibilbideen aukeraketa egokiena                   gauzatzea, ibilbide erabilienak eta gainzamatutako nodoen                   erabilera saihestuz.                  # Dagoeneko pilaketa egoeran badago sarea:      *     o     #     # Pilaketarem berri ematea: Nodo batek pilaketa egoera                         antzematen duenean ondoko nodoetara kontroleko paketeak                         bidali ditzake, beroni trafikoa bidaltzen uzteko                         eskatuz.                        # Paketeen ukapena: Pilaketa nabarmena denean, paketeak                         ukatu edo errefusa daitezke.   <number> SARE MAILAKO FUNTZIONALTASUNA <number>       * Multiplexazioa      *     o Lotura fisiko beretik, sare mailako konexio anitz garraiatzeko             teknika.      * Kontabilitatea / Fakturazioa            o Zenbatzea zenbat pakete, karaktere, bit…bidaltzen edo jasotzen             dituen bezero bakoitzak, fakturazio txosten bat sortuz      * Sareen elkarkonexioa (internetworking)            o Iturria eta helburua sare ezberdinetan badaude, sareen arteko             ezberdintasunak kudeatzea, sor daitezkeen arazoak konponduz.            o Ezberdinatsunak eman daitezke:      *     o     # Helbideratze eskeman                  # Bideratzean                  # Lehentasunetan                  # Paketeen tamaina eta formatuan                  # …  <number> SARE MAILAKO FUNTZIONALTASUNA <number>       * Zatiketa eta bermuntaketa      *     o Sare bakoitzak gehienezko tamaina bat zehazten du paketeentzako.      *     o     # MTU (Maximum Transfer Unit): Datu unitate batek garraio                   dezakeen gehienezko tamaina, lotura mailan neurtua (trama).             o Bi sarek onartzen dituen gehienezko tamainak ezberdinak badira…                  # Arazo bat emango da sare bat zeharkatu duen pakete batek,                   MTU txikiago bat daukan beste sare bat zeharkatu behar badu.                  # Ebazpen posibleak:      *     o     #     # Tamaina horiek kudeatzeko gaitasunik ez duten                         sareetatik paketeen bideraketa saihestea (beste                         bideraketa alternatibak aurkitzea). Ez da beti posible                         izaten.                        # Informazioa pakete txikiago anitzetan zatitzea sare                         berrira sartu aurretik, jatorrizko paketea zatituta                         bidaliz sare horretatik.  Zatiketa.            o Zatitzen denean, jatorrizko paketea berregiteko zati ezberdinak             bermuntatu egin behar dira  Bermuntaketa.                  # Zatiketa gauzatu den saretik irtetzerakoan bersanblatzen                   bada, zatiketa gardena.                  # Helburu ekipoan bersanblatzen bada, zatiketa ez gardena.   <number> SARE MAILAKO FUNTZIONALTASUNA <number>   ZIRKUITUEN    PAKETEEN KONMUT. KONMUT. Konexioak irauten duen denbora osoan Baliabideen partekatze dinamikoa baliabideak erreserbatuta Banda zabalera      Banda zabaleraren bermerik ez bermatua Datuak edozein       Sareak ezarritako formatua formatutan Konexioaren ezarpenean aurretiazko atzerapena, gero          Kontrol informazioarentzat prozesaketa denbora atzerapen aldakorra: gutxienezko   fitxategien transf. Aplikaz. atzerapena, konstantea : zuzeneko aplikaz. Ahula sarearen      Sendoa sarearen jauzien aurrean jauzien aurrean Denboraren arabera kobra Transmititutako informazio kopuruaren arabera kobra daiteke daiteke <number> <number>       *     o Konexiorik gabeko sareak (Datagrama modua)      *     o     # Sareak pakete bakoitza ere independentean kudeatzen du.                  # Beraz, komunikazio bat osatzen duten pakete ezberdinek,                   ibilbide ezberdinak gauzatu ditzakete.      *     o Konexiora zuzendutako sareak  (Zirkuitu birtual modua)                  # Komunikazio bereko pakete guztiek ibilbide berbera gauzatzen                   dute.      <number> <number>       * Konexiorik gabeko paketeen konmutazioko sareetan, pakete bakoitza ere       independentean kudeatzen da  datagrama.      *     o komunikazio bat osatzen duten pakete ezberdinek, ibilbide             ezberdinak gauzatu ditzakete.      *     o     # Ondorioz, orden ez egokian heldu daitezke helburura.            o Muturretako ekipoen ardura da komunikazio bereko paketean             kudeatzea.                  # Eta beharrezkoa balitz, ordenatzea.      * Pakete bakoitzak(datagrama) helburuaren helbidea eduki behar du.            o Erabilgarria den informazioa, garraiatzen denaren zati bat da, ez             dena.            o Sareko nodoek bideraketa erabakiak hartzen dituzte helburu             helbidearen arabera.                  # Nodoak prozesaketa denbora bat behar du.   <number> <number>       * Sareko jauzien aurrean sendotasuna.       * Kongestio egoeren aurrean erantzun ona.      * Sareak ez du mantendu behar konexioen egoeraren informaziorik.      * Atzerapena:      *     o Aldakorra (paketeak ibilbide ezberdina izan dezakete)            o Nodo bakoitzean prozesaketa denbora bat behar da bideraketa             erabakiak hartzeko.      * Aplikazioak: informazioaren hartu emana, fitxategien transferentzia…IP       aplikazioak.  <number> <number>       * Konexiora zuzendutako paketeen konmutazio sareetan, komunikazio baten       pakete guztiek ibilbide berbera jarraitzen dute.  Zirkuitu Birtuala       (ZB).      *     o Zirkuitua ez da fisikoki esklusiban ezartzen (baliabideen             erreserbarekin), zirkuitu birtuala baizik.      *     o     # ZB, komunikazio baten pakete guztiek iturritik helburura                   jarraituko duten ibilbidea da.                  # Ibilbideko loturetan, ez da kapazitaterik erreserbatzen,                   beste komunikazio batzuekin partekatzen da.            o Datu paketeak bidali aurretik ibilbidea ezarri behar da.            o Ez da bideraketa erabaki bana hartu behar pakete bakoitzeko,             baizik eta behin bakarrik, konexioaren ezarpenean.            o Komunikazio batetako paketeak orden zuzenean heltzen dira             helburura.  <number> <number>       * Ahula sareko jauzien aurrean.       *     o Ibilbideko lotura bat jauzten bada, lotura horretatik pasatzen             diren ZB guztiak jauzten dira.      * Kongestio egoeran erantzun eskasa.      * Sareak konexioen egoeraren informazioa mantendu behar du.      * Behin ZBaren ibilbidea ezarrita, informazioaren transmisioan gutxienezko       atzerapena ematen da, konstantea delarik.      * Aplikazioak: Informazio kopuru handiko transferentziak, zuzeneko       transmisioak….  <number> <number>   PAKETEEN KONMUT. KX. GABE                                      PAKETEEN KONMUT. KX. ZUZEN. Pakete bakoitza besteekiko independentea                       ZB: sareko 2 ekipoen arteko elkarte logikoa Pakete bakoitza era independentean bideratzen da:              Komunikazio bereko pakete guztiak ibilbide beretik (ZB): Ez da bermatzen eman ordenatua                                 Eman ordenatua bermatzen da Pakete guztiek helburuaren helbidea daramate.                  Pakete guztiek adierazi behar dute zein ZBekoak diren (KL                                                                identifikatzailea)                                                                Atzerapena: Atzerapena:                                                        * -Hasierako konexioaren ezarpena.      * -Bideraketa erabakia hartu behar da pakete bakoitzeko.      * -Transferentzia:       * -Ibilbide ezberdinen aukera atzerapen aldakorra          *     o -Konmutatu egiten da soilik: prozesaketa gutxiago                                                                           o -Ibilbide berbera: atzerapen berdina  Kongestioaren aurrean erantzun ona                             Kongestioaren aurrean erantzun eskasa Sareko jauzien aurrean sendoa                                  Sareko jauzien aurrean ahula <number> <number>   SARE MAILAK ESKAINITAKO ZERBITZUAK     * Sare mailak goragoko mailari eskaini diezaizkion zerbitzuek ezaugarri       ezberdinak izan ditzakete:      *     o Konexiorik badago ala ez:      *     o     # Konexiora zuzendua                  # Konexiorik gabekoa            o Zerbitzu fidagarri bat esakini ala ez (galerarik gabeko paketeen             emana, datuen bikoiztasunik gabe, sekuentzian):                  # Fidagarria                  # Fidagabea      * Sare mailako zerbitzu mota guztien konbinazio da posible teorikoki, naiz       eta denam ez eman praktikan. Konbinazio erabilienak hauek dira:             o Konexiora zuzendutako eta fidagarria den zerbitzua                  # Zirkuitu birtualetan oinarritua eta fidagarritasuna                   eskaintzen duten mekanismoak erabiliz.                  # Konplexutasuna sare mailan dago (sareko nodoetan).                   Terminalak “tontoak”                  # Adibidea: X.25.            o Konexiorik gabeko eta fidagabea den zerbitzua                  # Datagramatan oinarrituak, fidagarritasuna bermatzen duten                   mekanismorik gabe.                  # Konplexutasuna saretik goragorako mailetan dago, normalean                   garraio mailan (ekipo terminala).                  # Adibidea: IP  <number> <number>   <number>       * Sare mailak garraio mailari eskaintzen dion zerbitzua konexiora       zuzendutako zerbitzua da.      *     o Bi ekipo terminalen arteko paketeen hartuemana Zirkuitu Birtualen             (ZB) bidez ematen da.      * Erabilitako terminologia:            o DTE (Data Terminal Equipment): paketeen konmutazio sarera             konektatzen den erabiltzaile gailua da, beste DTE batzuekin             komunikatzeko asmoarekin. Bezeroari dagokio.            o DCE (Data Circuit Terminating Equipment): paketeen konmutazio             sareko lehen nodoa da, operadorearen sarea eta bezeroaren (DTE)             arteko interfazea egiten duelarik. Operadoreari dagokio          (Operadorearen gainontzeko paketeen konmutazio nodoei DSE (Data Switching Equipment) deitzen zaie)     * Beraz...      *     o Konexiora zuzendutako paketeen konmutazio sare batean, 2 DTE             ekipoen arteko komunikazio zerbitzu Zirkuitu Birtualen bidez             esakintzen da.  KONEXIORA ZUZENDUTAKO PAKETEEN KONMUTAZIOKO SAREAK <number> 22       * ZB bat sare batetako 2 DTE-ren arteko konexio logiko bat da, beraien       arteko komunikazioa ahalbideratzeko.      *     o Bi DTE-ren arteko ibilbide logikoa bi norantzazkoa, sarean zehar.      * BI DTE-ren arteko ZB batek tarteko nodo anitz zeharka ditzake.  22 23       * ZB anitz multiplexa daitezke lotura fisiko bakar batean  23 23   25   25 25 25   25   27   27   27   Enlace in LCI in Enlace out LCI out c         63     a          18 a         18     c          63 Enlace in LCI in Enlace out LCI out                                                       Enlace in LCI in Enlace out LCI out                                                       Enlace in LCI in Enlace out LCI out                                                       Enlace in LCI in Enlace out LCI out                                                       Enlace in LCI in Enlace out LCI out a         34     c          88 c         88     a          34 <number>         Helburu helbIidea Lotura A                 a B                 c C                 d D                 b Helburu helbIidea Lotura A                 a B                 b C                 a D                 c Helburu helbIidea Lotura A                 c B                 a C                 c D                 b Enlace in LCI in Enlace out LCI out a         88     c          276 c         276    a          88 Enlace in LCI in Enlace out LCI out a         276    b          63 b         63     a          276 Lotura in LCI in Lotura out LCI out c         63     a          18 a         18     c          63   <number>   Enlace in LCI in Enlace out LCI out c         63     a          18 a         18     c          63 Enlace in LCI in Enlace out LCI out c         63     a          18 a         18     c          63 Lotura in LCI in Lotura out LCI out c         63     a          18 a         18     c          63 Enlace in LCI in Enlace out LCI out a         276    b          63 b         63     a          276 Enlace in LCI in Enlace out LCI out a         276    b          63 b         63     a          276 Enlace in LCI in Enlace out LCI out a         88     c          276 c         276    a          88 Enlace in LCI in Enlace out LCI out a         88     c          276 c         276    a          88 Enlace in LCI in Enlace out LCI out a         34     c          88 c         88     a          34 Enlace in LCI in Enlace out LCI out a         34     c          88 c         88     a          34 <number>           Lotura in LCI in Lotura out LCI out a         34     c          88 c         88     a          34 Lotura in LCI in Lotura out LCI out a         88     c          276 c         276    a          88 Lotura in LCI in Lotura out LCI out a         276    b          63 b         63     a          276 Antes de empezar la animación, explicar:     * -Cada conmutador (identificado por su número: 1, 2, 3 y 4) tiene una       serie de interfaces (enlaces) que le conectan con otros equipos       (conmutadores, equipos finales). Cada uno de esos interfaces es       identificado por el PROPIO CONMUTADOR con un identificador (a, b, c, d).       Referencia a que los interfaces en los dos extremos de un mismo enlace       pueden ser identificados por distinto (o por el mismo) identificador por       parte de los equipos en los que se localizan dichos interfaces.      * -Cada equipo final (DTE) se conecta a la red a través de un único DCE (a       través de ese único enlace físico puede establecer CV con cualquier otro       DTE de la red). Cada DTE es identificado en la red por una dirección (el       formato de la dirección depende del tipo de red concreta de la que se       trate: X.25, FR, ATM, MPLS… En la figura, A, B, C, D). La dirección es       necesaria para poder establecer CVC: tengo que poder indicar con qué DTE       quiero establecer el CVC.      * -En cada conmutador hay dos tipos de tablas:      *     o -Tablas de encaminamiento: contienen información de a través de qué             enlace llego a cada uno de los posibles destinos. Esa tabla ya             tiene la información de antemano (aunque todavía no esté mostrada,             la vamos a ir viendo conmutador a conmutador), y se consulta en la             fase de establecimiento del CVC para saber por dónde establecerlo             para llegar al destino que se me está indicando en la Solicitud de             Establecimiento de CVC.            o -Tablas de conexiones: contienen información de las conexiones (CV)             que están establecidas; cada entrada de la tabla indica cómo             conmutar los paquetes pertenecientes a un determinado CV que pasa             por dicho conmutador. La entrada de la tabla correspondiente a un             determinado CV se CREA en el establecimiento del CV, y se CONSULTA             en la fase de transferencia de información para cada uno de los             paquetes da datos.  Luego ya, empezar con la explicación del establecimiento de un CVC <number> <number>   <number>   Enlace in LCI in Enlace out LCI out                                                       Enlace in LCI in Enlace out LCI out                                                       Enlace in LCI in Enlace out LCI out                                                       Enlace in LCI in Enlace out LCI out                                                       Lotura in LCI in Lotura out LCI out c         63     a          18 a         18     c          63 Lotura in LCI in Lotura out LCI out a         276    b          63 b         63     a          276 Lotura in LCI in Lotura out LCI out a         88     c          276 c         276    a          88 Lotura in LCI in Lotura out LCI out a         34     c          88 c         88     a          34 <number>           35 35   35 35   35       35         Indicar que lo que viene del nivel de transporte, para el nivel de transporte puede ser un segmento de datos o de control (podría ser un SYN), pero desde el punto de vista del nivel de red se considera carga útil: lo que mi usuario (transporte) me pide que yo transmita al otro extremo de la red. 35 35   35       * IP protokoloa (Internet Protocol) Interneten erabiltzen den sare mailako       protokoloa da.     1.     o Mundu mailan gehien erabiltzen den protokoloa da.     1.     o Funtzionalki, OSI-k definitutako konexioarik gabeko sare mailako             protokolotzat jo daiteke.  IP PROTOKOLOA: SARRERA 35 35 35   35   IP PROTOKOLOA: ZERBITZU MOTA     * Goragoko mailari konexiorik gabeko eta fidagabea den zerbitzu bat       eskaintzeko, IP-k goragoko mailarekin bi primitiben bitartez komunikatzen       da:      1.     o Send: Erabiltzaileak IP-ri datu unitate baten transmisioa eskatzen             dio.            o Delivery: IP-k datu unitate bat heldu dela jakinarazten dio             erabiltzaileari.      * Primitibek parametroak dituzte (iturri helbidea, helburu helbidea,       protokoloa, zerbitzuaren kalitatea…), IP datagramaren eremuetan jasoko       direnak.  41   IPv4 HELBIDERATZEA     * Internetera konektatutako interfaze bakoitzak mundu mailan bakarra den       IP helbide bat dauka.       *     o Ekipo gehienek (ekipo terminalak) interfaze bakarra daukate.      *     o     # Interfaze horren IP helbidea hartzen da makina horren IP                   helbidetzat.            o Baina badaude sare anitzetara konektatuta dauden ekipoak (adib.             router edo bideragailuak), eta hauek interfaze anitz dituzte.                   # Ekipo hauek IP helbide ezberdin bat daukate interfaze                   bakoitzeko, interfazea konektatzen den sarearekin lotuta                   dagoena.       * IP helbideak 32 biteko zenbakiak dira.            o Normaleam puntuen bidezko notazio hamartarrarekin adierazten dira:             byte bakoitza hamartarrean adierazten da (0-255), puntuen bidez             banatuta.            o Adib: 11000011 00101001 00000110 00010100        195.41.6.20      * IP helbide bat bi zatiz osatuta dago:      *     o Sare aurrizkia: IP helbidearen balio handieneko bitak, IP sare             baten interfaze guztientzako amankomunak direnak. IP sarea             identifikatzen du.       *     o     # Sarearen egitura hierarkikoarekin helbideratzea errazten du.                               o Ekipoaren identifikatzailea ( Host id.): IP helbidearen balio             gutxieneko bitak. Sarearen barruan ekipoa identifikatzen du.  41           * Helbide bereziak:      *     o Aurrizkiak identifikatutako sare baten barruan, host-aren             identitatea honako hau denean:       *     o     # Dena 0ak: sarea bera identifikatzen da.                  # Dena1ak: sareko ekipo guztiak (broadcast), difusioa sarean.                  # Gainontzeko helbideak: sare horretako ekipoak.      *     o 255.255.255.255 helbidea (dena 1ak):      *     o     # Difusioa (broadcast) interfazeari dagokion sarean.      *     o 127.X.Y.Z helbideak: loopback helbideak.      *     o     # Ekipo batek helbide honetara bidaltzen badu datagrama bat,                   IP protokoloaren softwareak datagrama ekipoari berari                   bueltatzen dio, loturatik bidali beharrean, zuzenean                   irteerako kontroladoretik sarrerako kontroladorera.  44 IPv4 HELBIDERATZEA       * Klaseen bidezko helbideraketa.      *     o Saiatzeko:      *     o     # IP helbide hauetako bakoitzarentzako:                         # 157.143.252.207, 4.23.145.90, 221.143.253.15,                         93.31.1.245,198.76.9.23                          # Adierazi:                         #  Klasea (A, B, C, D);  Sare eta ekipoaren                         identifikatzaioea;  sare helbidea eta broadcast                         helbidea      *     o Klaseetan oinarritutako helbideraketa eskema ez dator bat gaur             egungo sareen tamainarekin (256 ekipo, 64000ekipo, 16000000 ekipo).                               # IP helbide asko “alferrik galduak”.  44 IPv4 HELBIDERATZEA: Klaseak   44 IPv4 HELBIDERATZEA: Klaseak Contar aquí que en los enlaces entre routers (enlaces punto a punto) sólo tengo 2 interfaces, y sin embargo lo mínimo que puedo usar es una clase C: 256 valores – 1 (red) – 1 (broadcast) = 254 direcciones de red. Desperdicio 252 direcciones. El resto de redes son redes LAN (puede que haya más equipos que los que aparecen en la figura). 47 47       * Subnetting (RFC 950)      *     o Klase baten zatiketa azpiklaseetan, hauek benetako sareen             tamainekin bat datozelarik.             o Adib: C klasea 192.165.45.0 (256 helbide, 254 ekipo). Helbide             hauek 4 sareen artean zatitu nahi ditut, bakoitzean 64 helbide             daudelarik (62 ekipo).       *     o     # C klasearen zatiketa 4 azpiklasetan:       *     o     #     # 192.165.45.00XXXXXX, hau da, 192.165.45.0                              192.165.45.63                        # 192.165.45.01XXXXXX, hau da, 192.165.45.64                            192.165.45.127                        # 192.165.45.10XXXXXX, hau da, 192.165.45.128                          192.165.45.191                        # 192.165.45.11XXXXXX, hau da, 192.165.45.192                          192.165.45.255      *     o     # Sare aurrizkiari 2 bit gehitzea  6 bit nodoak                   identifikatzeko.      * Supernetting (RFC 1338)            o Klase multzo baten taldekatzea (2n) sare bakar batean.            o Adib: 4 klase C (192.165.44.0, 192.165.45.0, 192.165.46.0 y             192.165.47.0), 1024 (4 x 256) helbideko sare bakar batean taldekatu             nahi ditugu.      *     o     # 192.165.001011XX.XXXXXXXX superklasean taldekatzea.                   # Sare aurrizkiari 2 bit murriztea  10 bit nodoak                   identifikatzeko.        * Classless InterDomain Routing. CIDR (RFC 1519)      *     o subnetting eta supernetting tekniken orokortzea:      *     o     # Sare batean nodoak identifikatzeko bit kopuru egokia                   esleitzea.                  # Gainontzeko bitak sare aurrizkiarentzako (13 y 27 bit                   bitartean)      *     o Maila ezberdinetako hierarkiak ahalbidetzen ditu, eskuragarri             dauden IP helbideen probetxurik egokienarekin.      *     o Sare helbidea (CIDR blokea):   A.B.C.D/x                  # A.B.C.D: Blokea osotasunean identifikatzen duen IP                   helbidea.                  # x: sare aurrizkiaren luzera, CIDR blokean barne dauden                   helbide guztiek amankomunean dituzten bit kopurua.       *     o     # Adibidea:         192           .165          .192                            .0           / 21                  11000000.10100101.11000000.00000000     *     o IP helbideen adierazpena:   A.B.C.D/x      *     o     # A.B.C.D: IP helbidea.                  # x: sare aurrizkiaren luzera, zein CIDR blokeri dagokion                   identifikatzen duen helbidearen bit kopurua.      *     o     # Adibidea :         192           .165          .197                            .43           / 21                  11000000.10100101.11000101.00101011                 192.165.197.43/21 helbidea 192.165.192.0/21 sareari dagokio IPv4 HELBIDERATZEA : CIDR helbideak       * Classless InterDomain Routing.       *     o Sare maskaren erabilpena.      *     o     # Maskara: 32 bitez osatutako zenbakia,  lehenengo 1en                   sekuentziaz, eta jarraian 0en sekuentziaz osatutakoa.      *     o     #     # 1 balioen blokeak sarea identifikatzen duen IP                         helbidearen  zatia identifikatzen du.                        # 0 balioen blokeak sarearen barruan ekipoa                         identifikatzen duen IP helbidearen  zatia                         identifikatzen du.      *     o Adibidea:       192.165.197.43/21                  # IP helbidea:                           192.165.197.43                         11000000.10100101.11000101.00101011                   # Maskara:                         255.255.248.0                           11111111.11111111.11111000.00000000      *     o     # Sarea(IP_Helb AND Maskara):        192.165.192.0 (/21)                    11000000.10100101.11000000.00000000                  # Ekipoa:                                                                                       XXXXXXXX. XXXXXXXX. XXXXX101. 00101011                  # Difusio Helb. (Sarea+ dena 1ak):        192.165.199.255                         11000000.10100101.11000111.11111111      *     o Saiatzeko:                   # 25.12.13.49/27             25.12.13.90/27                  # 158.227.66.13/20        158.227.67.143/20                  # 158.227.66.13/24        158.227.67.143/24                        # IP helbide bikoteak sare berekoak al dira?                         # Helbide hauek parte diren sareen broadcast eta sare                         helbideak.    51 IPv4 HELBIDERATZEA : CIDR helbideak   51 IPv4 HELBIDERATZEA : CIDR helbideak       * Malgutasuna:      *     o R-U ISPak (internet hornitzaileak) helbideen azpibloke bat dauka,             1 Erakundeari dagokiona, Seriotasun Gutxiko ISParen ibilbide             laburpenean jasota dagoena.       *     o     # Ez dago bideratze arazorik,  R-U ISParen ibilbide laburpena                   murriztaileagoa delako (/23 vs /20)                  # Baliteke 1 Erakundeak ISPz aldatu izana. Ez ditu                   birkonfiguratu izan behar beronen IP helbideak  IPv4 HELBIDERATZEA Ibilbidearen laburpena 53       * Nola eskuratu sareko helbide bat. DHCP.      * IP helbideP pribatuak. NAT.  53 IPv4 HELBIDERATZEA Laborategiko praktikak     55 55 55       * Bertsioa: IP protokoloaren  bertsio zenbakia.      *     o Gehien zabaldutako bertsioa: IPv4 (ikusitako formatua).            o Protokoloaren bertsio berritua : IPv6.      * Length (edo Internet Header Length, IHL): Burualdearen luzera, 32 biteko       blokeetan.            o Gutxienezko balioa: 5 (20 byte), bakarrik zati finkoa.            o Gehienezko balioa: 15 (20+40 byte).      * ToS (Type of Service): Host-ak nahiago duen zerbitzu mota aukeratzeko,       datagrama nola kudeatu beharko litzatekeen zehaztuz.            o Teoriz, bideragailuek ibilbiderik egokiena aukeratu dezakete eremu             honetan adierazitako irizpideekin:      *     o     # Lehentasuneko 3 bit.                  # Optimizatzeko irizpideak zehazteko 4 bit: atzerapena,                   errendiendua, fidagarritasuna, kostua.            o Praktikan, router gehienek ez dute eremu hau kontutan izaten.  55       * Luzera: Datagramaren luzera totala (burualdea+ datuak), bytetan       zenbatua.      *     o 16 bit: Gehienezko luzera 65535 byte.      * Ondorengoko eremuek zatiketa eta bermuntaketarako definitu ziren:            o Identifikazioa: Helburuari datagrama identifikatzeko balio dio.      *     o     # Datagrama bakoitzeko unitate batean gehitzen da.                  # Datagrama bati dagozkien zatiki guztiek balio berbera                   daramate eremu honetan.            o DF identifikatzailea (Don’t Fragment): Ez zatitu.                  # 1 balioa badarama, bideragailuei adierazten die zatiketarik                   ez gauzatzeko (helburuan bermuntaketa gaitasunik ez                   dagoelako).                  # Bideragailuak zatiketa beharrezkoa den sareetatik                   zeharkatzea saihestuko du.            o MF identifikatzailea(More Fragments): Zati gehiago.                  # Zatiki guztiek, azkena izan ezik, MF=1 balio daramate.            o Zatikiaren desplazamendua (Offset).                  # Zatikiaren lehen datu  byteak jatorrizko IP datagraman                   zeukan posizioa, datagramaren hasiera eta zatikiaren                   hasieraren arteko desplazamendua adieraziz.                  # 8 byteko blokeetan adierazten da.      *     o     #     # Beraz, zatiki guztien tamaina (azkenengoarena izan                         ezik) 8 byten multiploa da.  55 55 55       * TTL (Time to Live): Datagrama batek sarean zehar izan ditzakeen       gehienezko saltu kopurua.      *     o Datagrama bat sarean etengabe saltoka egon ez dadin.      *     o     # TTL eremua unitate batean txikitzen da saltu bakoitzean.                  # 0-ra heldutakoan, datagrama baztertzen da eta jatorrzko                   hostari ohartarazten zaio.      * Protokoloa: Goragoko mailako protokoloa, IP datagraman garraiatzen diren       datuak sortu dituena.            o Adib. TCP (6), UDP (17), ICMP (1)…      * Header Checksum (Burualdearen baieztapen batuketa): Datagramaren       burualdeko erroreak detektatzea ahalbidetzen du.            o Saltu bakoitzen birkalkulatu behar da.      * Iturriaren IP helbidea: Datagramaren iturri den makinaren IP helbidea.      * Helburuaren IP helbidea: Datagramaren helburu den makinaren IP       helbidea.  55       * Aukerak: Normalean erabiltzen ez diren parametroak sartzea ahalbidetzen       du, funtzionaltasun berriak probatu...      *     o Segurtasuna: segurtasun etiketa, datagramak daraman informazioaren             konfidentzialtasun maila zehazten duelarik..             o Iturritik bideraketa zehatza: Datagramak iturriktik helburura             bidean zeharkatu behar dituen IP helbideen sekuentziazioa darama.             o Iturritik bideraketa askea: ibilbidean zehar datagramak             derrigorrez zeharkatu behar dituen IP batzuen helbideak,             adierazitako ordenean, baina beste router batzuk ere zeharka             ditzake.            o Ibilbidea erregistratu: Ibilbideko routerrei adierazten zaie             aukera eremuan beraien IP helbidea gehitzeko, datagramak jarraitu             duen ibilbidearen berri izateko.             o Denbora markak: IP helbideak erreggistratzeaz gain, routerrek 32             biteko denbora marka bat ere erregistratzen dute.          Router gehienek eremu hau ez dute kontuta izaten, eta normalean ez da erabiltzen             * Betetzea: Burualdearen tamaina 32 biten multiplo izan dadin.  55       * IP-k operazio nagusi eta baita beste prozedura batzuk definitzen ditu,       sare ezberdinetan zehar datagramen transferentziarako beharrezkoak diren       funtzioak gauzatzeko.      *     o Datuen oinarrizko transferentzia.      *     o     # Bideraketa.            o Zatiketa eta bermuntaketa.            o Erroreen berriematea.  55                 * Host edo bideragailu baten sare mailako funtzioak:        * Iturri ekipoan:      *     o IPren erabiltzaileak Send primitiba bat bidaltzen du, bidali nahi             dituen datuekin eta transferentziarako beharrezkoak diren datu             guztiekin.            o IP mailak, informazio honekin IP datagrama bat osatzen du.            o IP mailak, beronen bideraketa taulan begiratzen du helburura             heltzeko hurrengo saltua zein den, eta bidali egiten dio.      * Hurrengo saltua:            o IP mailak datagrama jasotzen du, aztertzen du eta helburu finala             bera den ala ez baieztatzen du:      *     o     # Hala bada: “protokoloa” eremuan adierazitako erabiltzaileari                   pasatzen dizkio datagramaren datuak, Delivery primitiba                   erabiliz.                  # Ez bada: bere bideraketa taulan begiratzen du helburura                   heltzeko bidean hurrengo saltua nor den, eta bidali egiten                   dio.      * Hau saltuz saltu errepikatzen da helburura heldu arte.  61 61 61       * Helburua : datagrama zein hurrengo saltotara bidali behar den       erabakitzea, burualdean zehaztutako helburura heltzeko.      * Iturri ekipoan eta datagramak zeharkatzen dituen routerretan, IP       bideraketa algoritmoa exekutatzen da.      *     o Helburu host-a sare berean badago:          bideraketa zuzena.      *     o     # Zuzenean datagrama helburura bidaltzen da.                  # Datagrama daukan ekipoaren interfazeetako bat eta helburu                   ekipoko IP helbideen sareko aurrizkiak berdinak direnean                   ematen da.       *     o Helburu hosta beste sare batean badago: zeharkako bideraketa.      *     o     # Helburura ibilbidean dagoen routerrik hurbilenera bidaltzen                   da datagrama.       *     o     #     # Router hori, datagrama daukan ekipoaren sare berean                         egon behar da, datagrama eman ahal izateko.                  # Ba al dago helburu horrentzako sarrera bat bideraketa                   taulan?                        # Bai: sarrera horretan agertzen den hurrengo saltura                         bidaltzen da.                        # Ez: lehenetsitako routerera bidaltzen da (0.0.0.0                         helbidea)      *     o     #     # •Ez da IP helburua eremua aldatzen ibilbide osoan                         zehar!!!  61       * IP bideraketa taulak: nola heldu helburu ezberdinetara.      * Bideraketa dinamikoa bada, bideraketa tauletan jasotako informazioa       eguneratu eta hobetua izan behar da..       * Hori ez da IP-ren erantzunkisuna, baizik eta:            o Bideraketa zentralizatua bada:      *     o     # Routerrek beraien bideraketa taula nodo zentral batetatik                   jasotzen dute, kudeaketa mezu berezi batzuen bitartez.                  # Ez da asko erabiltzen.            o Bideraketa banatua bada:                  # Routerrek beraien bideraketa taulak eguneratzeko informazioa                   elkar traukatzen dute : bideraketa protokoloak:      *     o     #     # Barne pasabideko protokoloak (Interior Gateway                         Protocols, IGP): RIP, OSPF                        # Kanpo pasabideko protokoloak(Exterior Gateway                         Protocols, EGP): BGP  BIDERAKETA TAULEN SORTZE ETA MANTENTZEA Helburua Sare maskara Hurrengo saltua Interfazea …                                                <number>   NODO FINALETAKO        BIDERAKETA TAULAK 65     * Bideraketa zuzena:          IP iturria 223.1.1.1 (A); IP helburua 223.1.1.3 (B)    1.     o Taularen 1. lerroa: iturri eta helburua IP sare   berean daude.     1.     o     # Hurrengo saltua: zuzenean helburua                  # Irteerako interfazea: 223.1.1.1  IP helbidea daukan                    interfazea    (A-k daukan interfaze bakarra)                  # Lotura mailak trama 223.1.1.1 IP helbidea daukan                   interfazetik 223.1.1.3 IP helbidea daukan interfazera                   bidaltzen du.       * Zeharkako bideraketa:          IP iturria 223.1.1.1 (A); IP helb. 223.1.2.1 (E)    1.     o Taularen 2. lerroa: iturri eta helburua IP sare   ezberdinetan             daude.                  # Hurrengo saltua : 223.1.1.4 IP helbidea daukan interfazea                  # Irteerako interfazea: 223.1.1.1  IP helbidea daukan                    interfazea    (A-k daukan interfaze bakarra)                  # Lotura mailak trama 223.1.1.1 IP helbidea daukan                   interfazetik 223.1.1.4 IP helbidea daukan interfazera                   bidaltzen du.  65 65   66 NODO FINALETAKO        BIDERAKETA TAULAK       * IP iturria 223.1.1.1 (A); IP helburua 223.1.2.1 (E)      *     o Taularen 2. lerroa: Helburua, routerraren 223.1.2.9 interfazearen             sare berean.      *     o     # Hurrengo saltoa: helburua (ez du beste routerrik behar)                  # Irteerako interfazea: 223.1.2.9 IP helbidea daukan                   interfazea                  # Lotura mailak trama 223.1.2.9 IP helbidea daukan                   interfazetik 223.1.2.1 IP helbidea daukan interfazera                   bidaltzen du  66 ROUTERRETAKO            BIDERAKETA TAULAK   67       IP ZATIKETA ETA BERMUNTAKETA     * IP protokoloa sare ezberdin anitzetan erabili daiteke.      * Sare bakoitzak, normalean, garraiatu ditzakeen paketeei gehienezko       tamaina bat ezartzen die: MTU.      * IP-k sare fisikoaren MTU-a baino handiagoa den datagrama bat bidali       behar duenean, zatitu egin beharko du MUT horren tamaina bereko edo       txikiagoko zatikietan.      *     o Zatiki bakoitza era independentean bidaltzen da helburura.            o Baliteke zeharkatzen duen hurrengo sareren batea berriro zatitu             behar izatea.        * IP konexiorik gabekoa denez, zatikiek ez dute ibilbide berbera jarraitu       behar.       *     o Beraz, behin datagrama zatitutakoan, ez da bermuntatzen helburura             heldu arte  zatiketa ez gardena.      * Helburuko  IP mailak ezin dio erabiltzaileari zatiki bakoitzaren edukia       pasa, aurretiaz bermuntatu egin behar ditu.      * Zatikiak bermuntatzeko, helburuak jatorrizko datagramari dagozkion       zatiki guztiak jaso behar ditu, eta ordenean jarri. Burualdeko eremuak       erabiliko ditu: :            o Datagrama berberari dagozkion zatikiak identifikatzeko.            o Zatikiak ordenean ezartzeko.            o Dagoeneko zatiki guztiak jaso diren ala ez antzemateko.      * Zatikiren bat jasoko ez balitz, bermuntaketa prozesua bertan bera uzten       da, datagrama berorri dagozkion zatiki guztiak baztertuz.   68 IP ZATIKETA ETA BERMUNTAKETA                             II adibidea    1.     o A ekipoko IP mailak, garraio mailatik 960 byteko mezu bat jasotzen             du, helburu bezala B ekipoa daukalarik.             o A-tik B-ra ibilbideko sareen MTU-ak ezberdinak dira.  70 IP ZATIKETA ETA BERMUNTAKETA   ICMP PROTOKOLOA     * Router batek, arroziren batengatik datagrama bat bidali ezin badu,       errore mezu bat bidali beharko dio iturri ekipoari edo beste router       batzuei, arazoaren berri emanez.      * Internet Control Message Protocol (RFC 792) IP sareetan errore eta       kontrol mezuen hartu-emana ahalbidetzen duen protokolo bat da.      *     o Router eta host-en artean sarearen egoeraren beri emaeko.      *     o     # Errorren berri ematea                  # Oihartzunaren eskaera/erantzuna (ping)            o Erroreen berri ematen du, ez ditu zuzentzen.      * Protokolo pilan, ICMP IP-ren erabiltzailea da:            o ICMP mezuak datagrametan doaz.      * Jakinarazpen batzuen adibideak:            o Helburu(host, sare, portu, protokolo…) helduezina:                  # Bideraketa taulan ez dago informaziorik bideraketa                   gauzatzeko                  # Ezinezkoa da paketea zatitzea                  # …            o Parametroaren arazoa (legezkanpoko balioa burualdearen eremu             batean).            o Denbora agortua (TTL 0-ra heldu da)  traceroute-k erabiltzen du            o Oihartzunaren eskaera, oihartzunaren erantzuna  ping-ek             erabiltzen du            o …  70  
