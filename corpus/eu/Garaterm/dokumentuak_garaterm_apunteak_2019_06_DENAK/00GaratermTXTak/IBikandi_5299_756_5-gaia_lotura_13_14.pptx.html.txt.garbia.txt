<?xml version="1.0" encoding="UTF-8"?> Telekomunikazio Sareen eta Zerbitzuen Arkitektura Telekomukazioaren Ingeniaritza Teknikoko Gradua (2. Maila)   5. GAIA – LOTURA MAILA     * Helburuak      *     o Lotura mailako funtzionaltasuna ulertzea.            o Lotura mailak ebatzi beharreko arazoak aztertzea puntutik-             punturako lotura batean.       *     o     # SLIP/PPP protokoloak aztertzea.            o Lotura mailak ebatzi beharreko arazoak aztertzea difusiozko lotura             batean.                   # LAN sareen erabilpenaren ingurunea ezagutzea, aurkezten                   dituzten arazoak ulertzea eta ebazteko aukera ezberdinak                   aztertzea.                  # Ethernet sareen kasu zehatza aztertzea.                  # LAN inguruneetan, sare mailako eta lotura mailako                   helbideratze eskemen arteko harremana ulertzea      * Bibliografia            o Kurose-ren 5. kapitulua.            o Tanenbaum-en 3. eta 4. kapituluak (3. edizioa)            o Stallings-en 6., 7., 15. eta 16. kapituluak (7. edizioa)  <number>   5.1        Lotura maila. 5.1.1        Lotura mailako kanal motak. 5.1.2        Lotura mailako funtzionaltasuna. 5.1.3        Non inplementatzen da lotura maila. 5.2        Puntutik-punturako loturak. 5.2.1        HDLC (High level Data Link Control). 5.2.2        SLIP (Serial Line Interface Protocol). 5.2.3        PPP (Point to Point Protocol). 5.3        Difusiozko sareak. LAN sareak 5.3.1        Difusio loturetako atzipen anitzeko protokoloak. 5.3.2        LAN sareak         5.3.2.1 Sarrera         5.3.2.2 Lotura mailako helbideratzea.         5.3.2.3 LAN sareen normalizazioa. IEEE 802.         5.3.2.4 Ethernet sareak.         5.3.2.5 LAN sareetan helbideratze ebazpena. <number> 5. GAIA – LOTURA MAILA: Edukia Para el curso que viene, considerar la posibilidad de incluir también el caso en el que el “enlace” que conecta dos nodos adyacentes (desde el punto de vista IP) sea en realidad una red: caso MPLS  ver Kurose (5.8) En realidad, al hablar del acceso a Internet (previo a SLIP/PPP) ya planteamos esto para la línea serie a través de la red telefónica. <number> <number>   <number> 5. GAIA – LOTURA MAILA   LOTURA MAILA     * Lotura maila (Data Link Layer)      *     o Elkar ondoko nodoen arteko informazioaren elkar trukaketaren             arduraduna, zuzenean lotzen dituen lotura baten bitartez.             o Maila fisikoa (transmisio bide arrunt bat) lotura fidagarri             batetan bihurtu dezake…      *     o     # Goragoko mailari, errorerik gabeko lotura bat eskaini                   diezaioke.          … ala ez.     5 5 El datagrama de nivel de red se transporta en cada uno de los enlaces sobre un protocolo de nivel de enlace diferente (Ethernet, Frame Relay, PPP, WiFi 802.11…) Cada protocolo de nivel de enlace proporciona un servicio diferente (puede ser transferencia de información fiable o no fiable  2º punto de la transparencia)   LOTURA MOTAK     * Puntutik punturako lotura      *     o Bi ekipo zuzenean konektatzen dituen lotura, bakoitza loturaren             mutur batean dagoelarik.       *     o     # Komunikazioan, bietako batek transmisore gisa jokatzen du                   eta besteak hartzaile gisa.      * Difusiozko sareak (puntu anitzeko loturak, broadcast)            o Ekipo multzo bat elkar konektatzen dituen lotura.                   # Komunikazio jakin batean, ekipoetako batek transmisore gisa                   jokatzen du, eta beste bat edo batzuek hartzaile gisa.                  # Baina bidalitako trama, loturara konektaturik dauden ekipo                   guztiei heltzen zaie.  5 5 Pregunta: ¿qué problemática aparece en las redes de difusión que no aparece en los enlaces punto a punto?     * -Cómo identificar a las estaciones origen y destino de la trama:       direccionamiento.      * -Cómo usar el canal de un modo coordinado: control de acceso al medio.    LOTURA MAILAKO FUNTZIONALTASUNA     * Funtzio nagusiak:      *     o Tramen egitura            o Errore detekzioa            o Errore zuzenketa            o Eman fidagarria            o Fluxu kontrola            o Helbideratzea            o Loturaren kudeaketa  5 5   LOTURA MAILAKO FUNTZIONALTASUNA     * Tramen egitura      *     o Sare mailatik jasotako pakete bakoitza lotura mailako trama batean             enkapsulatzea.       *     o     # Paketeak, tramaren datuak eremuan bidaiatzen du.                  # Gainera, lotura mailako burualde edo goiburu eta buztan                   eremu batzuk ditu.                  # Trama bakoitzaren hasiera eta bukaera identifikatzea                   (mugatzea).                   # Adib. Tramaren hasieratze eta bukaerako flag edo ikurrekin.                  # Gardentasun mekanismoak, tramaren edukiaren zatiren bat                   tramaren hasieratze edota bukaerako ikurrengandik                   bereizteko.  5       * Errore detekzioa      *     o Transmisio bideak erroreak sor ditzake bit segidan (zarata,             seinalearen moteltzea…): 1 bitar bat bidalitakoan 0 bitarra             jasotzea edo alderantziz.      *     o     # Banakako erroreak edo boladako erroreak.            o Errore detekziorako mekanismo batek hartzaileari erroreak dituzten             tramak antzematea ahalbidetzen dio.                  # Errore detekziorako mekanismoen funtzionamendua.      *     o     #     # Igorleak tramaren bukaeran kodigo bat gehitzen du                         (VAL1), traman bidaltzen diren bitekin lorturiko                         funtzio aritmetikoa.                         # Hartzaileak, algoritmoa ezagutzu era berean kodigo bat                         kalkulatzen du (VAL2) traman jasotako biten arabera,                         eta jasotako kodigoarekin (VAL1’ konparatzen du).                        # VAL1’VAL2 bada, jasotako tramak erroreak ditu.                  # Errore detekziorako kodeak.                        # Parekotasuna:       *     o     #     #     # 1 edo 0 gehitzen dio, tramak dituen 1 kopurua                               bakoitia edo bikoitia izatearen arabera.                              # Errore kopurua bakoitia bada balio du bakarrik                               ¡EZ da erabilgarria errore detekziorako!                        # CRC (Cyclic Redundancy Checking).                               # Tramaren bitekin egindako operazio aritmetikoa,                               CCITTak estandarizatutako polinomioak erabiliz.  5 LOTURA MAILAKO FUNTZIONALTASUNA Pregunta: ¿para qué quiero poder detectar a nivel de enlace si una trama es errónea? Respuesta: para descartar la trama y así no retransmitir un paquete erróneo a través de los siguientes enlaces de la red (eso como mínimo, y quizás también para notificarle al transmisor que la he recibido con error y que la retransmita). 9 9       * Errore zuzenketa      *     o Hartzaileak, tramaren biten batean errorea gertatu dela             konturatzeaz gain, errore horiek zuzentzeko gai da (trama berbidali             beharrik gabe).      *     o     # Errore zuzenketarako kodigoek informazio erredundantea                   gehitzen dute, beronekin erroreak zuzendu ahal izateko.       * Eman fidagarria            o Hartzaileari trama guztiak ematen zaizkiola bermatzea, errorerik             gabe eta ordena zuzenean.            o Horretarako erabiltzen dira:                  # Sekuentziazio zenbakiak.                  # Zuzen jasotako tramen baieztapen positiboa eta                   denboragailuak.                  # Erroreekin jasotako edota sekuentziaz kanpo jasotako tramen                   baieztapen negatiboak.                  # Bertransmizioak.            o Bereziki garrantzitsuak errore tasa altuko loturetan.                  # Errore tasa baxuko loturetan, premiazkoa ez den gainzama                   suposa dezake.  9 LOTURA MAILAKO FUNTZIONALTASUNA Pregunta: ¿Por qué en los enlaces inalámbricos (con tasas de error alta) tiene sentido que a nivel de enlace se implementen mecanismos que garanticen la entrega fiable de tramas en el enlace, a pesar de que también se implemente entrega fiable a nivel de transporte (p. ej. TCP)? Respuesta: para corregir los errores localmente (en el enlace en que se producen los errores), en lugar de obligar a que el protocolo de nivel de transporte retransmita los datos terminal a terminal. Entrega fiable TCP: extremo-a-extermo Entrega fiable a nivel de enlace: entre el equipo transmisor en un extremo del enlace y el equipo receptor al otro extremo de ese enlace (sólo en ese enlace) En cambio 9 9       * Fluxu kontrola      *     o Loturaren mutur batean dagoen igorleak ezin du tramarik bidali             beste muturreko hartzaileak jasan dezakeen abiaduran baino             azkarrago.      *     o     # Hartzailearen aldeko mugak: jasotako datuen bilketarako                   bufferra, datuen prozesaketa abiadura…            o Metodo ezberdinak, adib:                  # Geldialdi eta itxarotea (stop & wait).                  # Leiho irristakorraren teknikak.      * Helbideratzea            o Transmisioan parte hartzen duten estazio bien identifikaziorako             (lotura mailan).            o Bereziki garrantzitsua puntu anitzeko edo difusiozko loturetan             (adib. LAN).  9 LOTURA MAILAKO FUNTZIONALTASUNA 9 Paralelismo entre algunas funciones de nivel de enlace con las de nivel de transporte:     * -Ambos pueden ofrecer un servicio fiable. Los mecanismos que utilizan son       similares, pero el ámbito es diferente:      *     o -Transporte: entrega fiable de segmentos entre dos procesos, desde             un terminal al otro terminal.            o -Enlace: entrega fiable de tramas entre dos nodos conectados por un             único enlace.      * -Ambos pueden ofrecer control de flujo (entre terminales, o entre nodos       adyacentes)      * -Idem con control de errores        * Loturaren kudeaketa      *     o Maila fisikoak loturatik seinaleak transmititzea ahalbidetzen du             kodifikazio jakin batekin, baina...      *     o     # Ez dakigu desiaturiko hartzailea jasotzeko prest dagoen ala                   ez.                  # Ezin daiteke eragotzi gailu batek baino gehiagok                   transmititzea une berean, bakoitzaren seinaleak ondatuz.                  # …            o Loturara konektaturik dauden ekipoen artean koordinazio egokia             beharrezkoa da, elkar trukaketa era zuzenean eman dadin.                  # Kooperazioa datuen hartu-emanaren hasieratze, mantentze eta                   amaierarako.                  # Puntu anitzeko loturetan. Partekatutako bide edo kanalera                   atzipena kontrolatzea funtsezkoa da.  9 LOTURA MAILAKO FUNTZIONALTASUNA 9 Ponerse de acuerdo en quién puede transmitir, cuándo y cómo (establecimiento del enlace, si es balanceado-no balanceado, si es half-duplex/semi-duplex…)   NON INPLEMENTATZEN DA                     LOTURA MAILA     * Sareko ekipo bakoitzean inplementatzen da (ekipo terminala, routerra…),       berauek loturetara konektaturik dituzten lotura bakoitzean.      * Sare egokigailu edo adaptadoreetan inplementatzen da (Network Interface       Card, NIC)      *     o Lotura maila eta maila fisikoa inplementatzen ditu.            o Adib: Ethernet txartela, 802.11 txartela…            o Aintzina fisikoki txartel ezberdinetan (PCI, PCMCIA), gaur egun,             plaka basean integratuak      * Hardware, software eta firmware konbinazioa.  9   EGOKIGAILUEN ARTEKO KOMUNIKAZIOA 13                           13 5. GAIA – LOTURA MAILA       * Lotura mailako protokolorik esanguratsuena da.      *     o ISO-k estandarizatua (ISO 3309, ISO 4335)      *     o     # Loturaren kudeaketarako aukera anitz definitzen ditu:      *     o     #     # Konfigurazio ezberdinak (estazioen arteko harremanak):                         orekatua (pareko estazioak), orekagabeak (estazioetako                         batek dauka loturaren kontrola).                        # Operazio modu ezberdinak (noiz transmititu dezake                         estazio batek): edozein momentutan, estazio nagusiari                         baimena eskatuz, estazio nagusiak txanda ematen                         didanean.                        # Eman fidagarria bermatzeko mekanismo ezberdinak                        # …                  # Tramaren formato erraza.      *     o     #     # Kontrola:        Trama mota (Informazioa edo Kontrola.                         Kontrola bada, zein kontrol mota den)          Transmisio eta hartze sekuentzia zenbakiak.     *     o Lotura mailako protokolo gehientsuenak definitzeko eregu gisa             erabili da.                  # Protokolo zehatz bakoitza, HDLCn definituriko                   konfigurazioetatik azpimultzo bat izaten da.                   # Adibideko protokolo batzuk: PPP, LLC.  13 HDLC (High level Data Link Control) 16 Paralelismo entre algunas funciones de nivel de enlace con las de nivel de transporte:     * -Ambos pueden ofrecer un servicio fiable. Los mecanismos que utilizan son       similares, pero el ámbito es diferente:      *     o -Transporte: entrega fiable de segmentos entre dos procesos, desde             un terminal al otro terminal.            o -Enlace: entrega fiable de tramas entre dos nodos conectados por un             único enlace.      * -Ambos pueden ofrecer control de flujo (entre terminales, o entre nodos       adyacentes)      * -Idem con control de errores    INTERNETERA ATZIPENA     * Etxeko erailtzaileen internetera atzipena:      *     o Sare telefonikora konektaturik daude, ez Internetera.            o Nola heldu Internetera sare telefonikoaren bidez?       * Operadoreek sare telefonikoaren erabiltzaileei internetera atzipena       eskaintzen zien (ISP, Internet Service Provider), sare biak konektatuz.            o ISPak ekipo bat dauka bi sareetara konektatuta :      *     o     # Erabiltzailea eta ekipo horren artean puntutik-punturako                   lotura bat ezartzen da.                  # Erabiltzailearen gailuak orduan IP helbide bat izan dezake,                   TCP/IP protokoloak hitzegin … Internetera konektatuta                   dagoelako.            o Baina linea hauetaik IP datagramak garraiatzeko era bat definitu             baher da.                  # TCP/IP datagramak sare mota ezberdinetatik (LAN, X.25, …),                   garraiatzeko estandarrak bazeuden, baina ez IP datagramak                   serieko lineatan (puntutik-punturakoak) enkapsulatzeko.  16       * IP-ren enkapsulaketa serieko lineatan:      *     o SLIP (Serial Line Interface Protocol)      *     o     # Definitu zen lehen protokoloa da.                  # Estandarizatu gabekoa (RFC-rik ez).                  # Ahulezia batzuk.            o PPP (Point to Point Protocol)                  # SLIP protokoloaren ahuleziak gainditzeko definitua.                  # Interneten estandarra (RFCetan definitua)      * Biek ahalbidetzen dute internetera atzipena era merkean serieko lineak       erabiliz (zirkuitu telefoniko bat bezala), zuzenean internetera       konektatuta egongo balitz bezala.       * Eskakizunak:            o Oinarrizko linea telefonikoa edo RDSI.            o PC-aren serieko portuari konektatutako modem bat.            o SLIP/PPP sw-akin dagoen PC bat.            o ISP-arekin kontua bat izatea.      * Orokorrean, lotura maila bat eskaintzen du paketeak garraiatzeko,       puntutik punturako lotura baten bitartez konektatutako bi ekipoen       artean.  17 INTERNETERA ATZIPENA   SLIP (Serial Line Interface Protocol)     * Protokolo oso erraza, IP paketeak serieko linean enkapsulatzeaz       arduratzen dena.      *     o IP datagramaren mugatzea END (0xc0) karaktere berezia erabiliz.            o Karakterearen gardentasun mekanismoa:      *     o     # END bytea agertzen bada IP datagramaren barruan, 0xdb-0xdc                   transmititzen da.       *     o     #     # 0xdb karakterea ESC deitzen da (scape karakterea)                  # ESC bytea agertzen bada IP datagramaren barruan, 0xdb-0xdd                   segidagatik ordezkatzen da    SLIP     * SLIP protokoloaren ahuleziak:      *     o Ez du baimentzen IP ez diren protokoloen garraioa.      *     o     # Ez dago goragoko mailako protokoloa identifikatzeko balio                   duen eremurik.            o Ez du baimentzen IP helbidearen esleiketa dinamikoa ezta             erabiltzailearen autentikazioa.                  # Ez du loturaren kontrola edo negoizaketa gauzatzeko                   aukerarik eskaintzen, loturak eskuz ezarri eta konfiguratzen                   dira.                  # Serieko linearen muturretan dauden ekipoek, beste muturreko                   ekipoaren IP helbidea ezagutu behar dute.            o Ez du errore detekzio ezta zuzenketarik gauzatzen.                  # Errorerik balego, goragoko mailako protokoloak arduratu                   beharko dira errore kontrola gauzatzeaz.            o Ez du onartzen goiburu edo burualdeko konpresio mekanismorik.                  # Eremu batzuk errepikatu egiten dira erreskadan doazen pakete                   askotan.  19   PPP (Point to Point Protocol)     * PPP puntutik punturako lineatarako lotura mailako protokolo bat da:      *     o IETF-ak estandarizatua (RFC 1661).            o SLIP protokoloak zituen arazoak gainditzen ditu.      * PPP-ren hobekuntzak SLIP-ekiko:            o Konexioaren ezarpenean adostu daitezke konfiguraziozko             parametroak.      *     o     # Konexioaren konfigurazioa errazten du.            o Protokolo anitz onartzen ditu lotura bakar batean.                  # Ez TCP/IP trafikoa soilik, baita IPX, AppleTalk, DECnet…                   (beste protokolo pila batzuk).                  # Protokolo ezberdinen trafikoa bidali daiteke konexio                   berean.            o CRC-a dauka errore detekziorako.            o Sarritan erabiltzen diren IP goiburuko konpresio teknikak             erabiltzen ditu.            o Autentikazio mekanismoak ere erabiltzen ditu.  19   PPP     * Aipatutako hobekuntzak lortzeko, honako osagai nagusiak ditu:      *     o Datagramak serieko loturetan enkapsulatzeko metodo bat.      *     o     # Protocol: Enkapsulatutako datuak zein protokolotakoak                   diren.                  # Data: Adierazitako protokoloaren datuak, PPP loturatik                   bidaltzen ari direnak.                  # Padding: scape karaktereak (01111101) , flag bytea                   (01111101)  Data eremuan agertuko balitz.            o LCP (Link Control Protocol) protokolo bat, lotura ezartzeko,             konfiguratzeko eta frogatzeko.                  # Muturretako ekipoek aukera batzuk adostea ahalbidetzen du                   (MTU, autentikazioa protokoloa, goiburuko eremuetan                   konpresioa erabiltzea…).            o Autentikazio protokoloak, erabiltzailearen identifikazioa             baieztatzeko.                  # Hasieran, bakarrik 2: PAP (Password Authentication Protocol)                   eta CHAP (Challenge Handshake Authentication Protocol).            o NCP protokolo famili bat (Network Control Protocols), sare mailako             protokolo ezberdinak ezarri eta konfiguratzeko.                  # Horien artean, IPCP (IP Configuration Protocol). Beronen                   bitartez, IP helbidea dinamikoki esleitu daiteke, beste gauza                   batzuetaz gain.  19   19 PPP   PPP   19   PPP     * Lotura batek, sare mailako protokolo baten paketeak garraiatu ahal       izateko, honako baldintzak bete behar ditu:      *     o Loturaren ezarpena eta konfigurazioaren negoziaketa.      *     o     # LCP paketeen elkar trukaketa.            o Autentikazioa.                  # Aukerazkoa.                  # Aurreko fasean adostutako autentikazio protokoloaren                   arabera.            o Sare mailako protokoloaren konfigurazioaren negoziaketa.                   # NCP protokolo egokiaren paketeen elkar trukaketa, datuen                   transferentzian erabiliko den sare mailako protokoloarekin.      *     o     #     # Datuen transferentzia IP bada: IPCP (adib.  IP                         helbideen negoziaketa).      * Beronen NCP-aren bitartez aukerak negoziatu diren sare mailako       protokoloaren paketeen elkar trukaketa.            o Sare maila IPCP-ren bitartez konfiguratu bada, dagoeneko IP             paketeak elkar trukatu daitezke.      * Behin komunikazioa bukatutakoan, aktibitatea bukatu behar da bai sare       mailan zein lotura mailan.            o Sare mailako bukaera.                  # NCP protokolo egokiaren paketeen elkar trukaketa.            o Loturaren bukaera.                  # LCP paketeen elkar trukaketa.  19 En la negociación del enlace (LCP) se puede negociar:     * -omitir los bytes “Dirección” y “Control”, ya que siempre tiene el mismo       valor.      * -MTU del enlace, o tamaño máximo del campo de Datos (por defecto, 1500       bytes)      * -Tamaño del campo “Protocol” (por defecto 2 bytes, podría ser 1)  19 19   19 PPP   26 5. GAIA – LOTURA MAILA 26 26   26 DIFUSIO SAREAK 26 26       * Banaketa estatikoa (banatu)      *     o Loturaren erabilera estazio guztien artean banatu.      *     o     # Abantailak: guztiz ekitatiboa; ez dago talkarik.                  # Gabezia: kanalaren kapazitatea eraginkortasunik gabe                   erabiltzen da.            o Adibideak: TDMA, FDMA, CDMA.      * Partekatze dinamikoa (partekatu)            o Estazio bakoitzaren beharren arabera loturaren kapazitatea             partekatzea.            o Ausazko atzipen teknikak (mekanismo probabilistak).                  # Estazioak loturaren erabileragatik konpetitzen dute.                  # Estazio baten transmititzen duenean, kanala osos-osorik                   erabiltzen du, baina ez dauka bermatuta kanala berarentzako                   denik, talkak gerta daitezke.                  # Adibideak: ALOHA; ALOHA tartekatua; CSMA etengabea, ez                   etengabea, etengabea; CSMA/CD (Ethernet); CSMA/CA (WiFi)…            o Txandakako atzipen teknikak (mekanismos deterministikoak).                  # Une bakoitzean, estazio bakar batek transmititu dezake.                   Txandakatu egiten dira ekipoak.                  # Estazio baten tx duenean, kanala oso-osorik erabiltzen du,                   talkarik egongo ez den bermearekin.                   # Adibideak:      *     o     #     # Nagusia/ morroia: Polling eta Selecting.                        # Berdinak: Lekukoa.  26   26 5. GAIA – LOTURA MAILA 26 26   SARRERA     * Sare lokal (LAN) bat, difusio sare bat da ezaugarri hauek dituelarik:      *     o Area geografiko txikia.      *     o     # Eraikin baten barruan, edota km gutxi batzuen barruan.            o Erakunde baten jabetza.                  # Normalean, LAN baten bitartez konektatzen diren ekipoak                   erakunde berekoak dira.            o Erabiltzen diren transmisio bideek zera eskaintzen dute:                  # Transmisio abiadura altuak.      *     o     #     # Datuen transmisiorako pentsatuak.                        # Mbps  Gbps.                  # Errore tasa (BER) baxua.      * 70. hamarkadan sortuak, baliabideak (gailuak, hw, sw) partekatzeko LAN       sarearen erabiltzaileen artean.      * Koste baxuak eta errendimendu altuak berauen hedapen azkarra bultzatu       zuten.  26 En la negociación del enlace (LCP) se puede negociar:     * -omitir los bytes “Dirección” y “Control”, ya que siempre tiene el mismo       valor.      * -MTU del enlace, o tamaño máximo del campo de Datos (por defecto, 1500       bytes)      * -Tamaño del campo “Protocol” (por defecto 2 bytes, podría ser 1)  26 26   ONURAK     * Baliabideen partekatzea:      *     o Datuak eta informazioa.            o Periferikoetara atzipena.            o Programak eta aplikazioak.            o Komunikazioak.      * Instalazio eta mantentze kostu baxuak.      * Kableatu erraza.      * Arautu gabekoa.      * Kostuen murrizketa.  26 En la negociación del enlace (LCP) se puede negociar:     * -omitir los bytes “Dirección” y “Control”, ya que siempre tiene el mismo       valor.      * -MTU del enlace, o tamaño máximo del campo de Datos (por defecto, 1500       bytes)      * -Tamaño del campo “Protocol” (por defecto 2 bytes, podría ser 1)  26 26   LAN BATEN ELEMENTUAK     * LAN sareko azpiegitura:      *     o Kableatua            o Elkar konexiorako ekipamendua      * LAN batera konektatzen diren ekipoak:            o Zerbitzariak: zerbitzuak eskaintzen dituzte. Bilketa diska batean,             segurtasun kopiak, sare publikora atzipena…            o Lanerako ekipamendua: zerbitzuak erabiltzen dituzte; baita ere             baliabideak jarri ditzakete eskuragarri beste ekipo batzuentzako.          LAN sarera konektatzen den ekipo bakoitzak behar duena:    1.     o Konexio fisikoa:     1.     o     # Transmisio bidera kableatua edo hari gabeko konexioa.                  # Sareko hardwarea: LAN motaren araberako sareko txartel                   zehatza.            o Komunikazio Sw:                  # Ekipoen arteko komunikazioa kontrolatzen duen Sw.  26 En la negociación del enlace (LCP) se puede negociar:     * -omitir los bytes “Dirección” y “Control”, ya que siempre tiene el mismo       valor.      * -MTU del enlace, o tamaño máximo del campo de Datos (por defecto, 1500       bytes)      * -Tamaño del campo “Protocol” (por defecto 2 bytes, podría ser 1)  26 26   LAN BATEN TOPOLOGIA     * Gehien erabiliak LAN ingurunetan:  26 En la negociación del enlace (LCP) se puede negociar:     * -omitir los bytes “Dirección” y “Control”, ya que siempre tiene el mismo       valor.      * -MTU del enlace, o tamaño máximo del campo de Datos (por defecto, 1500       bytes)      * -Tamaño del campo “Protocol” (por defecto 2 bytes, podría ser 1)  34 34   TX ERAK ETA TX BIDEAK     * Tx bide fisikoaren erabileraren arabera 2 transmisio mota bereiztu       daitezke LAN batean:      *     o Oinarri-banda      *     o     # Seinalea zuzenean transmititzen da bide fisikotik, modulatu                   gabe.                  # Seinale digitalak, abiadura altuan transmititzeko erabilia.            o Banda zabala edo tx modulatua                  # Tx bidea kanal ezberdinetan zatitzen da, maiztasunean                   multiplexatuta: komunikazio anitz une berean.                  # Modulazio/demodulazio beharra: gareztiagoa.                  # Seinaleak analogikoak izan behar dira.      * Datuen transmisiorako oinarri-banda-ko transmisioa erabiltzen da.        * LAN sareetako tx biderik erabiliena: pare bihurritua (UTP,STP),       ardazkidea, zuntz-optikoa eta hari gabekoa.  34 En la negociación del enlace (LCP) se puede negociar:     * -omitir los bytes “Dirección” y “Control”, ya que siempre tiene el mismo       valor.      * -MTU del enlace, o tamaño máximo del campo de Datos (por defecto, 1500       bytes)      * -Tamaño del campo “Protocol” (por defecto 2 bytes, podría ser 1)  34 34   34 5. GAIA – LOTURA MAILA 34 34   LAN SAREEN NORMALIZAZIOA. IEEE 802     * IEEE erakundeko 802 lantaldeak LAN eta MAN sareentzako estandarrak sortu       ditu.      * Estandar hauek OSI ereduaren 1. eta 2. mailak arautzen dituzte.  34 En la negociación del enlace (LCP) se puede negociar:     * -omitir los bytes “Dirección” y “Control”, ya que siempre tiene el mismo       valor.      * -MTU del enlace, o tamaño máximo del campo de Datos (por defecto, 1500       bytes)      * -Tamaño del campo “Protocol” (por defecto 2 bytes, podría ser 1)  37 37       * Maila fisikoa.      *     o Seinaleen kodifikazio eta dekodifikazioa.            o Sinkronizazioa.            o Bit-en transmisio eta hartzea.            o Tentsioak zehaztea.            o …  37 En la negociación del enlace (LCP) se puede negociar:     * -omitir los bytes “Dirección” y “Control”, ya que siempre tiene el mismo       valor.      * -MTU del enlace, o tamaño máximo del campo de Datos (por defecto, 1500       bytes)      * -Tamaño del campo “Protocol” (por defecto 2 bytes, podría ser 1)  37 37       * Lotura maila.      *     o Gogoratu:      *     o     # Lotura mailaren funtzioa: aldamenean dauden ekipoen artean                   informazio blokeak transmititu, transmisioan gerta daitezkeen                   arazoak kudeatuz.            o LAN sareetako lotura mailako arazoak:                  # Beste lotura mailen arazo berberak: tramen galerak,                   atzerapena, sekuentziazioa…                  # LAN sareetan “berezia”: bidera atzipen kontrola.             o Horregatik, LAN sareen kasuan 2-tan zatitzen da lotura maila:                  # LLC azpimaila (Logical Link Control):       *     o     #     # Lotura mailako funtzio tradizionalak: Loturaren                         kudeaketa, errore kontrola, fluxu kontrola…                        # Goragoko mailekin interfazea.                  # MAC azpimaila (Medium Access Control):                        # Tx bidera atzipen kontrola, ekipo anitzen artean                         partekatu daitekeelarik.                        # Funtzio gehigarriak: tramaketa, helbideratzea eta                         erroreen detekzioa (bietatik beherengoko azpigeruza                         izateagatik).  37 En la negociación del enlace (LCP) se puede negociar:     * -omitir los bytes “Dirección” y “Control”, ya que siempre tiene el mismo       valor.      * -MTU del enlace, o tamaño máximo del campo de Datos (por defecto, 1500       bytes)      * -Tamaño del campo “Protocol” (por defecto 2 bytes, podría ser 1)  37 37       * IEEE erakundeak estandar ezberdinak definitu ditu LAN sareentzako :      *     o Maila fisikoan eta MAC azpimailan ezberdintzen dira.            o LLC azpimailan berdinak dira.      * 802.1: Estandarren multzora sarrera eta interfazearen primitiben       definizioa.      * 802.2: LLC.      * MAC azpimaila eta maila fisikoa:            o 802.3 (Ethernet): probabilistikoa, lehiaketa, CSMA/CD. Xerox,             Intel eta Digital.            o 802.4 (Token Bus): deterministikoa, lekukoaren ematea bus             topologian. General Motors.            o 802.5 (Token Ring): deterministikoa, lekukoaren ematea eraztun             topologian. IBM.  37 En la negociación del enlace (LCP) se puede negociar:     * -omitir los bytes “Dirección” y “Control”, ya que siempre tiene el mismo       valor.      * -MTU del enlace, o tamaño máximo del campo de Datos (por defecto, 1500       bytes)      * -Tamaño del campo “Protocol” (por defecto 2 bytes, podría ser 1)  40 40       * LAN ingurune baten informazioaren enkapsulaketa       (TCP/IP protokolo pila suposatuz).  40 En la negociación del enlace (LCP) se puede negociar:     * -omitir los bytes “Dirección” y “Control”, ya que siempre tiene el mismo       valor.      * -MTU del enlace, o tamaño máximo del campo de Datos (por defecto, 1500       bytes)      * -Tamaño del campo “Protocol” (por defecto 2 bytes, podría ser 1)  41 41   MAC 41   2. MAILAKO HELBIDERATZEA     * 2. mailako helbideratzea.      *     o Gogoratu:      *     o     # LAN sareetan tx bidea partekatu egiten da: difusio sareak.                  # Ekipo guztiek jasotzen dute sarean zehar transmititzen den                   informazioa.                   # Beraz, LAN sareetan ez da bideratzerik behar.            o Hala ere, 2. mailako bideratze eskema bat beharrezkoa da:                  # Tramaren iturri eta helburu ekipoak zeintzuk diren                   identifikatzeko.                  # LAN batetako ekipo guztiek dute 2. mailako helbide bat (MAC                   helbidea, baita ere helbide fisikoa deritzona).                  # 2. mailako goiburuan, iturri eta helburu ekipoen MAC                   helbideak zehazten dira:      *     o     #     # Helburu ekipoak badaki:      *     o     #     #     # Trama berarentzako dela (helburu helbidea bere                               MAC helbidea da).                              # Zein ekipok bidali dion trama (iturri helbidean                               adierazita).                        # Beste ekipo guztiek trama hori alde batera uzten                         dute.                              # Helburu helbidea beraiena ez delako.                  # Helbideratze eskema laua. MAC helbide “eramangarria”.   42 En la negociación del enlace (LCP) se puede negociar:     * -omitir los bytes “Dirección” y “Control”, ya que siempre tiene el mismo       valor.      * -MTU del enlace, o tamaño máximo del campo de Datos (por defecto, 1500       bytes)      * -Tamaño del campo “Protocol” (por defecto 2 bytes, podría ser 1)  42 42       * LAN bateko egokigailu edo adaptadore bakoitzak bere MAC helbidea dauka,       48 bitekoa.   42     LLC. LOGICAL LINK CONTROL     * IEEE erakundeak azpimaila bat definitu du MAC protokolo guztien       gainetik: LLC, HDLC protokoloaren familikoa.      * LLC (Logical Link Control, Loturaren Kontrol Logikoa):      *     o Interfaze bakar eta uniformea eskaintzen du sare mailarekiko,             azpiko MAC protokoloaren zehaztapenekiko independentea dena.      *     o Lotura mailan MAC protokolo ezberdinak erabiltzen dituzten LAN             sareen arteko tramen hartu-emana ahalbidetzen du.      *     o Lotura mailako funtzio orokorrak definitzen ditu (fluxu kontrola,             errore kontrola…), MAC azpimaila beste funtzio batzuk gauzatzeaz             arduratzen duelarik (tramen mugatzea, errore detekzioa…).  42 42 42   LLC. PDU-aren FORMATUA     * SSAP, DSAP: Iturri (Source) eta Helburu (Destination) Helbideak       (Zerbitzura Atzipen Puntuak).      * I/G: Helburu helbide bakarra (I) edo taldekoa (G).      * C/R: Agindu (C) edo Erantzun (R) PDU.      * LLC Kontrola.      *     o HDLC-ren kontrol eremuaren antzekoa: trama mota, trama zenbatuen             kasuan sekuentzia zenbakia…      * Goragoko mailatik jasotako informazioa  42 42 42   LLC. HELBIDERATZE ESKEMA     * Zergaitik beste helbideratze eskema bat lotura mailan?       *     o Ekipo batek MAC helbide bakarra dauka, baina baliteke goragoko             mailako protokolo ezberdinekin datuen hartu-emana kudeatu behar             izatea une berean.            o MAC helbideak.      *     o     # Iturri eta helburu ekipoak identifikatzen ditu.            o LLC helbideak.                  # Lotura mailaren erabiltzaileak identifikatzen ditu,                   bidalitako informazioa sortu (transmisioan) edo beronen                   helburu (hartzean) direnak.      * LLC mailaren erabiltzaileek, honek eskainitako zerbitzuak Zerbitzuaren       Atzipen Puntu-en bitartez eskuratzen dituzte: L-SAP.            o LLC-PDU-ek iturriaren L-SAP (SSAP) eta helburuaren L-SAP (DSAP)             dituzte.      * Gaur egun LLC SNAP-ekin batera erabiltzen da (SNAP/LLC enkapsulaketa).      *     o DSAP=SSAP=0xAA.            o Goragoko mailako protokoloaren identifikazioa SNAP goiburuan             (EtherType eremua) gauzatzen da.          (Ikusi Ethernet Tramaren formatua) 42 42 42   42 5. GAIA – LOTURA MAILA 42 42   ETHERNET SAREAK     * LAN kableatuen artean nagusia.       *     o Merkea: 20 $ NIC txartel batek.            o Hedapen handiko lehen erabilitako LAN teknologia            o Lekukoa erabilitako LAN edota ATM teknologiak baino merkeagoa eta             errazagoa            o Abiaduraren eguneraketa: Mbps-tatik 10Gbps-ra gaur egun…  42 En la negociación del enlace (LCP) se puede negociar:     * -omitir los bytes “Dirección” y “Control”, ya que siempre tiene el mismo       valor.      * -MTU del enlace, o tamaño máximo del campo de Datos (por defecto, 1500       bytes)      * -Tamaño del campo “Protocol” (por defecto 2 bytes, podría ser 1)  42 42       * 90. hamarkada ingururarte, bus topologiak.      * Hortik aurrera, kontzentratzaileetan (hub edo errepikagailu)       oinarritutako izar topologiak nagusitu ziren.      *     o LAN sareko ekipoak kontzentratzailera konektatzen dira pare             bihurritua erabiliz.            o Kontzentratzaileak maila fisikoan egiten du lan.      *     o     # Kontzentratzaileak beronen interfaze bakoitzetik jasotzen                   duen bit bakoitza, birsortuta birtransmititzen du beste                   interfaze guztietatik.            o Difusio sare bat izaten jarraitzen du: talkak egon daitezke.      * 2000. hamarkadan hasieran, konmutagailuetan (switch) oinarritutako izar       topologiak nagusitu ziren, kontzentradoreak gaindituz.            o Kommutagailuak lotura mailan egiten du lan.                  # Kommutagailuak trama bat jasotzen duenean interfaze batetik,                   bildu egiten du, aztertu, eta tramaren helburu den                   egokitzailea konektatuta dagoen interfazetik soilik                   birtransmititzen du.            o Talkak guztiz saihesten dira (ezin dira eman).  42 ETHERNET SAREAK La LAN Ethernet original fue inventada a mediados de la década de 1970 por Bob Metcalfe y David Boggs. La LAN Ethernet original utilizaba un bus coaxial para interconectar los nodos. Las topologías de bus para Ethernet se mantuvieron durante la década de 1980 y hasta mediados de la década de 1990. Ethernet con una topología de bus es una LAN de difusión (todas las tramas transmitidas viajan hasta todos los adaptadores conectadas al bus, y son procesadas en ellos). A finales de la década de 1990, la mayor parte de las empresas y universidades habían reemplazado sus redes LAN por instalaciones Ethernet utilizando topologías en estrella basadas en concentradores (hubs). Los equipos finales están directamente conectados a un concentrador mediante un cable de cobre de par trenzado. Un concentrador es un dispositivo de la capa física que actúa sobre los bits individuales en lugar de sobre las tramas. Cuando un bit, que representa un cero o un uno, llega procedente de una interfaz, el concentrador simplemente vuelve a crear el bit, incrementa su intensidad de energía, y lo transmite a TODAS las demás interfaces. Por tanto, Ethernet con topología en estrella con concentrador es también una red LAN de difusión (cuando un concentrador recibe un bit en una de sus interfaces, envía una copia al resto de sus interfaces). En particular, si un concentrador recibe tramas procedentes de dos interfaces distintas al mismo tiempo, se produce una colisión y los nodos que crearon las tramas tendrán que retransmitirlas. A principios de la década de 2000, Ethernet experimentó un cambio evolutivo aún mayor. Las instalaciones Ethernet continuaron utilizando una topología en estrella, pero el concentrador fue reemplazado por un conmutador (switch). Un conmutador es un dispositivo de nivel de enlace que actúa sobre tramas: recibe una trama por una de sus interfaces, la almacena y la reenvía SOLO por el interfaz en el que está conectado el adaptador cuya dirección MAC coincide con la MAC destino de la trama. Un conmutador coordina sus transmisiones y nunca reenvía más de una trama a la misma interfaz en el mismo instante. Además, los conmutadores modernos son full-duplex, por lo que un conmutador y el equipo a él conectado pueden enviarse tramas entre sí simultáneamente sin que colisionen. Es decir, en una red LAN basada en conmutadores NO se producen colisiones. 50 50   ETHERNET SAREAK. CSMA/CD (Carrier sense multiple access with collision detection)     * IEEE 802.3 edo Ethernetek bidera atzipen kontrolerako         CSMA/CD 1-etengabea definitzen du.      *     o Ekipo batek trama bat daukanean transmititzeko, kanal entzuten du             (Carrier Sense):      *     o     # Kanala libre: transmititu egiten du.                  # Kanal okupatuta: ez du transmititzen, baizik eta kanala                   entzuten geratzen da, eta libre geratzen den bezain pronto                   transmititu egiten du.            o Ekipo bat trama bat transmititzen hasten denean, kanala entzuten             jarraitzen du talkarik gertatu den ala ez jakiteko (Collision             Detection).                  # Ez badu beste transmisiorik antzematen, trama osorik                   transmititzen du.                  # Tx bidea libre geratu denean bi edo ekipo gehiagok                   transmisio saiakera egin badute, talka gertatuko da, eta                   parte hartu duten ekipoek antzeman egingo dute.                  # Talka sortu duten ekipo guztiek:      *     o     #     # Transmisioa eten egiten dute talka antzeman bezain                         pronto.                        # 48 biteko zarata bolada bat sortzen dute beste ekipoei                         berri emateko.                        # Ausazko denbora bat itxaroten dute (talka kopuruarekin                         batera luzetzen doana) eta prozesua  osorik                         errepikatzen dute  50 50 50   ETHERNET SAREAK. funTZIONAMENDUA     * Oinarri bandako transmisioa.      * Kodigo baten beharra, zeinek:      *     o Talkek antzematea errazten duena (balioko bita, 1 baliokoa eta             aktibitaterik gabeko linea bereizteko balio duena).             o Kanpo erlojurik gabe hartzaileak sinkronizatzea ahalbidetzen duena             (bit bakoitzaren hasiera eta bukaera doitasunez zehazteko).      * Manchester kodifikazioa:            o 1 bita (altu-baxu), 0 bita (baxu-altu).       *     o     # Bit periodo bakoitzak trantsizio bat dauka erdian.                   # Banda zabalera bikoitzaren beharra.            o Maila altua: +0,85 V, Maila baxua: -0,85 V. Aktibitaterik gabeko             kanala: 0 Volt.                   # Seinaleraen balio ertaina bita bakoitzeko: 0  abantaila                   elektrikoak, kontsumorik ez.  50 50 50   ETHERNET SAREAK. TRAMAREN FORMATUA 50 53 53   53 ETHERNET SAREAK. TRAMAREN FORMATUA 54 54   54 ETHERNET SAREAK. TRAMAREN FORMATUA 55 55       * Ethernet tramen formatua:  55 ETHERNET SAREAK. TRAMAREN FORMATUA 56 56   56 ETHERNET SAREAK. TRAMAREN FORMATUA 57 57   LAN SAREEN EBOLUZIOA 57 57 57   LAN SAREEN EBOLUZIOA: ABIADURA 57 57 57   57 LAN SAREEN EBOLUZIOA: ABIADURA 60 60   60 LAN SAREEN EBOLUZIOA: ABIADURA 60 60   60 LAN SAREEN EBOLUZIOA: MUGIKORTASUNA 60 60   60     * Sare mugikor eta hari gabekoetan, bidera atzipen kontrolaren beharra:      *     o Estazioak mugikorrak edo eramangarriak izateagatik:      *     o     # Mugikortasuna kudeatu behar da, sarean erregistroa,                   estazioen kokapena…            o Hari gabeko ingurunean erabiltzeagatik:                  # Transmisio arazoak: Hedapen galerak, interferentziak,                   zarata, bide-anitzeko hedapena…      *     o     #     # Maila fisikoan ebatzitako arazoa.                  # Segurtasunaren beharra: autentikazioa, enkriptatzea.   LAN SAREEN EBOLUZIOA: MUGIKORTASUNA 60 60   60 LAN SAREEN EBOLUZIOA: MUGIKORTASUNA 60 60   60 5. GAIA – LOTURA MAILA 60 60       * 3. mailako helbideratzea vs 2. mailako helbideratzea:      *     o 3. mailako helbideratzea (IP).      *     o     # Pakete bat bideratu, helburu ekipoa dagoen IP sarera heldu                   arte                  # 32 biteko helbidea                  # Helbideratze hierarkikoa.             o 2. mailako helbideratzea (MAC)                  # LAN sare bateko ekipo batetatik, LAN bereko beste ekipo                   batera trama bat heldu-arazteko erabilia. Identifikatzeko                   erabilia.                   # 48 biteko helbidea                  # Ez dago hierarkiarik.  60 2. MAILAKO HELBIDERATZEA vs 3. MAILAKO HELBIDERATZEA En la negociación del enlace (LCP) se puede negociar:     * -omitir los bytes “Dirección” y “Control”, ya que siempre tiene el mismo       valor.      * -MTU del enlace, o tamaño máximo del campo de Datos (por defecto, 1500       bytes)      * -Tamaño del campo “Protocol” (por defecto 2 bytes, podría ser 1)  60 60   HELBIDEAREN EBAZPENERAKO PROTOKOLOA (ARP) 60 67 67   HELBIDEEN EBAZPENA LAN SAREETAN 67     * IP datagramak bidali ahal izateko hurrengo saltora (sare berean       kokatutako ekipo bat izango da, bai router bat edo helburu ekipoa), sare       horretan definitutako mekanismo zehatzak erabili behar dira.      * LAN sareetan, paketea trama batean enkapsulatuta bidali behar da,       tramaren goiburuak zera daramalarik:       *     o Lotura mailako iturri helbidea (MAC helbidea) : norberarena.            o Helburuaren MAC helbidea: ???????      *     o     # Ezaguna den bakarra, hurrengo saltoaren IP helbidea da,                   baina ez bere MAC helbidea.                  # MAC helbidea ezagutu behar da, makina horren IP helbidea                   ezagututa:      *     o     #     # Konfigurazio fitxategiak: malgutasunik ez.                        # ARP Protokoloa (Address Resolution Protocol). Hau                         erabiltzen da!!!      * ARP Protokoloaren helburua: LAN sare batera konektatuta dagoen (A) ekipo       batek, LAN berean dagoen beste ekipo baten (B) MAC helbidea eskuratzea, B       ekipo horren IP helbidea ezagutuz gero.    ARP: ADDRESS RESOLUTION PROTOCOL 67     * LAN sare batera konektatuta dagoen ekipo batek (A), LAN bereko beste       ekipo bati (B) pakete bat bidali behar dio, beste ekipo honen IP helbidea       ezagutzen duelarik, baina ez MAC helbidea : sarean ARP-Request bat       zabaltzen du.      *     o Lotura mailan:      *     o     # Helburu helbidea: broadcast (LAN horretara konektaturiko                   ekipo guztientzako).            o ARP mailan:                  # Norena da (zein makinak dauka) IP helbide hau?                  # Helburuaren IP helbidea ezaguna da (IP-B), baina helburuaren                   MAC helbidea ez!!!!!!.      * Lotura mailan, trama hori LAN sarera konektatuta dauden ekipo guztietara       helduko da, eta denak direnez tramaren helburu (broadcast), denek pasako       dute tramaren edukia ARP mailara.            o Ekipo guztien ARP mailek ARP-Request paketea aztertzen dute, baina             bakar batek (B) identifikatzen du norberaren IP helbidetzat ARP-             Request paketean doan IP helbidea.      * Ekipo horrek ARP-Response batekin erantzuten du.            o Lotura mailan:                  # Helburu helbidea: ARP-Request mezua bidali zuen                   egokigailuarena(MAC-A)                  # Iturri helbidea: Norberarena (MAC_B)            o ARP mailan:                  # Ni (interfazeak MAC helbide honekin) naiz IP helbide honen                   jabea.                  # Iturri IP helbidea (IP-B), iturri MAC helbidea (MAC-B).      * A ekipoak dagoeneko badauka behar zuen informazioa IP paketea lotura       mailako trama batean enkapsulatzeko, helburu helbidetzat B ekipoa       duelarik.   67 67   ARP PROTOKOLOAREN FUNTZIONAMENDU OINARRIAK 67   ARP: OPTIMIZAZIOA 67 71 71   IP-ARP: ADIBIDEA  
